


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Medilab Bootstrap Template - Index</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="assets/img/group-logo.png" rel="icon">
  <link href="assets/img/group-logo.png" rel="apple-touch-icon">

  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
  <link href="assets/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
  <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/css/style.css" rel="stylesheet">
  <style>
    #sidebar {
      position: fixed;
      top: 47%;
      left: 50px;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .sidebar-btn {
      background-color: #2c4964;
      border: 2px solid #fff;
      width: 50px;
      height: 50px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s;
      color: #fff;
      font-size: 1.5rem;
    }

    .sidebar-btn:hover {
      transform: scale(1.1);
    }

    .sidebar-btn:focus, 
    .sidebar-btn:active {
      outline: none;
    }

    .sidebar-btn i {
      pointer-events: none;
    }

    .custom-user-icon {
      background-color: #87CEFA;
      border: 2px solid #fff;
      width: 50px;
      height: 50px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s;
      position: relative;
      color: #fff;
    }

    .custom-user-icon::after {
      display: none;
    }

    .custom-user-icon:hover {
      transform: scale(1.1);
      background-color: #2c4964;
    }

    .custom-user-icon:focus, 
    .custom-user-icon:active {
      background-color: #2c4964;
      color: #fff;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      outline: none;
    }

    .custom-icon {
      font-size: 1.5rem;
    }

    .table {
      border-collapse: separate;
      border-spacing: 0;
      width: 100%;
      border: 1px solid #ddd;
      border-radius: 5px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
    }

    .table th {
      background-color: #f8f9fa;
      border-bottom: 2px solid #ddd;
      padding: 12px;
      text-align: center;
      font-weight: 600;
      text-transform: uppercase;
    }

    .table td {
      border-bottom: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }

    .table tbody tr:hover {
      background-color: #f9f9f9;
    }

    #Save {
    background-color: #2c4964;
    border-color: #2c4964;
    color: #fff; /* Text color */
    transition: background-color 0.2s, border-color 0.2s, color 0.2s; /* Smooth transition */
    }

    #Save:hover {
        background-color: #204050; /* Darker shade for hover effect */
    }

    #Save:focus,
    #Save:active {
        outline: none;
        box-shadow: none;
    }

    #continueBtn {
      position: fixed;
      bottom: 50px;
      right: 20px;
      z-index: 1000;
      background-color: #2c4964;
    }

    #backBtn {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 1000;
    }

    #popupNotification {
        display: none;
        position: fixed;
        top: 430px;
        right: 20px;
        width: 355px;
        background: linear-gradient(135deg, #2c4964, #00aaff);
        color: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        font-family: 'Arial', sans-serif;
        z-index: 1000;
        animation: fadein 0.7s ease-in-out, ease-in-out 4.3s;
    }

    #popupNotification span {
        font-size: 17px;
        color: #fff;
        margin-right: 20px;
        text-align: justify;
    }

    @keyframes fadein {
        from {
            transform: translateY(1px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    @keyframes fadeout {
        from {
            transform: translateY(0);
            opacity: 1;
        }
        to {
            transform: translateY(1px);
            opacity: 0;
        }
    }

#popupNotification button {
    /* General button styles */
    border: none;
    color: white;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 12px; /* Smaller font size */
    margin: 4px 2px;
    cursor: pointer;
    border-radius: 5px;
    padding: 6px 18px; /* Smaller padding */
}

#popupNotification .yes-button {
    background-color: #4CAF50; /* Green */
}

#popupNotification .no-button {
    background-color: #f44336; /* Red */
}


</style>
</head>
<body>

<!--  Delete Button -->
<td><button class="btn btn-danger delete-btn"><i class="bi bi-x-circle"></i></button></td>

<!-- Logout Button -->
<button id="continueBtn" class="btn btn-primary">Logout</button>

<!-- Sidebar -->
<div id="sidebar">
  <button class="sidebar-btn" id="addItemBtn" title="Add Item"><i class="fas fa-plus"></i></button>
  <button class="sidebar-btn" id="deleteItemBtn" title="Delete Item"><i class="fas fa-trash-alt"></i></button>
  <button class="sidebar-btn" id="saveItemBtn" title="Save Item" ><i class="fas fa-save"></i></button>

</div>
<!-- End Sidebar -->

<!-- ======= Header ======= -->
<header id="header" class="fixed-top" style="top: 0; left: 0; right: 0; z-index: 1030;">
  <div class="container d-flex align-items-center">

    <img src="assets/img/group-logo-2.png" alt="Logo" style="height: 50px; margin-right: 10px;">

    <h1 class="logo me-auto"><a>History</a></h1>
    <!-- Uncomment below if you prefer to use an image logo -->
    <!-- <a href="index.html" class="logo me-auto"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->

    <nav id="navbar" class="navbar order-last order-lg-0">
      <i class="bi bi-list mobile-nav-toggle"></i>
    </nav><!-- .navbar -->

</header><!-- End Header -->


<!-- Add New Medicine Modal -->
<form action="" method="post">
<div class="modal fade" id="addItemModal" tabindex="-1" aria-labelledby="addItemModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addItemModalLabel">History</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="medicineName" class="form-label">Medicine</label>
          <input type="text" class="form-control" id="medicineName" name="medicineName" required>
        </div>
        <div class="mb-3">
          <label for="days" class="form-label">Days</label><br>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="Sunday" name="days[]" value="Sunday">
            <label class="form-check-label" for="Sunday">Sunday</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="Monday" name="days[]" value="Monday">
            <label class="form-check-label" for="Monday">Monday</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="Tuesday" name="days[]" value="Tuesday">
            <label class="form-check-label" for="Tuesday">Tuesday</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="Wednesday" name="days[]" value="Wednesday">
            <label class="form-check-label" for="wednesday">Wednesday</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="Thursday" name="days[]" value="Thursday">
            <label class="form-check-label" for="Thursday">Thursday</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="Friday" name="days[]" value="Friday">
            <label class="form-check-label" for="Friday">Friday</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="Saturday" name="days[]" value="Saturday">
            <label class="form-check-label" for="Saturday">Saturday</label>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <div class="mb-3">
              <label for="startTime" class="form-label">Time</label>
              <input type="time" class="form-control" id="startTime" name="startTime" required>
            </div>
            <div class="mb-3">
              <label for="status" class="form-label">Status</label><br>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="startTaken" name="status" value="taken">
                <label class="form-check-label" for="startTaken">Taken</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="startNotTaken" name="status" value="not_taken">
                <label class="form-check-label" for="startNotTaken">Not Taken</label>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="Save" data-bs-dismiss="modal">Save</button>
      </div>
    </div>
  </div>
</div>
</form>


<!-- Schedule Table -->
<section id="schedule" class="schedule">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div style="padding-bottom: 45px;"></div>
        <div style="max-height: 450px; overflow-y: auto;">
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>Medicine</th>
                <th>Day</th>
                <th>Time</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>


<!-- Vendor JS Files -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
<script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
<script src="assets/vendor/php-email-form/validate.js"></script>

<!-- Template Main JS File -->
<script src="assets/js/main.js"></script>

<script>
// Open the modal when the Add Item button is clicked
document.getElementById('addItemBtn').addEventListener('click', function() {
    var myModal = new bootstrap.Modal(document.getElementById('addItemModal'), {
        keyboard: false
    });
    myModal.show();
});

// Handle the Add Medicine button click
document.getElementById('Save').addEventListener('click', function(event) {
    const medicineName = document.getElementById('medicineName').value;
    const days = [];
    document.querySelectorAll('input[name="days[]"]:checked').forEach(checkbox => {
        days.push(checkbox.value);
    });

    const startTaken = document.getElementById('startTaken').checked ? 'Taken' : '';
    const startNotTaken = document.getElementById('startNotTaken').checked ? 'Not Taken' : '';

    const startStatus = startTaken || startNotTaken;
    const time = document.getElementById('startTime').value;

    // Create a new row and add it to the table
    const newRow = document.createElement('tr');
    newRow.innerHTML = `
        <td>${medicineName}</td>
        <td>${days.join(', ')}</td>
        <td>${time}</td>
        <td>${startStatus}</td>
    `;
    document.querySelector('table tbody').appendChild(newRow);

    // Clear the input fields
    document.getElementById('medicineName').value = '';
    document.querySelectorAll('input[name="days[]"]').forEach(checkbox => {
        checkbox.checked = false;
    });

    // Close the modal
    var myModal = bootstrap.Modal.getInstance(document.getElementById('addItemModal'));
    myModal.hide();
});










// SAVE BUTTON
document.getElementById('saveItemBtn').addEventListener('click', function() {
    alert('Save Item button clicked');
    saveTableData();
});

function saveTableData() {
    const tableData = [];
    document.querySelectorAll('table tbody tr').forEach(row => {
        const cells = row.querySelectorAll('td');
        const rowData = {
            medicineName: cells[0].textContent,
            days: cells[1].textContent.split(', '),
            time: cells[2].textContent,
            status: cells[3].textContent
        };
        tableData.push(rowData);
    });

    // Save the data to local storage
    localStorage.setItem('medicineData', JSON.stringify(tableData));

    // Send the data to the server
    const formData = new FormData();
    formData.append('tableData', JSON.stringify(tableData));

    fetch('historytable12.php', {
        method: 'POST',
        body: formData
    }).then(response => {
        if(response.ok) {
            //good
            scheduleReminders(tableData);
        } else {
            alert('Error saving table data');
        }
    }).catch(error => {
        console.error('Error:', error);
    });
}

function loadTableData() {
    const tableData = JSON.parse(localStorage.getItem('medicineData')) || [];
    const tbody = document.querySelector('table tbody');
    tbody.innerHTML = '';
    tableData.forEach(rowData => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${rowData.medicineName}</td>
            <td>${rowData.days}</td>
            <td>${rowData.time}</td>
            <td>${rowData.status}</td>
        `;
        tbody.appendChild(row);
    });
}

// Load the table data when the page is loaded
loadTableData();









// Delete function
document.getElementById('deleteItemBtn').addEventListener('click', function(event) {
    // Check if the click event target is the delete button itself
    if (event.target.classList.contains('delete-btn')) {
        const deleteBtn = event.target;
        const row = deleteBtn.closest('tr');

        // Show confirmation modal
        document.getElementById('confirmationModal').style.display = 'block';

        // Handle confirmation
        document.getElementById('confirmDeleteBtn').addEventListener('click', function() {
            // Remove the row from the table
            row.remove();
            // Hide the confirmation modal
            document.getElementById('confirmationModal').style.display = 'none';
        });

        // Cancel deletion
        document.getElementById('cancelDeleteBtn').addEventListener('click', function() {
            // Hide the confirmation modal
            document.getElementById('confirmationModal').style.display = 'none';
        });

        return; // Exit the function to avoid adding the delete button again
    }

    // Get all table rows
    const tableRows = document.querySelectorAll('table tbody tr');

    // Loop through each row
    tableRows.forEach(row => {
        // Check if the delete button already exists in the row
        const existingDeleteBtn = row.querySelector('.delete-btn');
        if (!existingDeleteBtn) {
            // Add a delete button to the row
            const deleteBtn = document.createElement('button');
            deleteBtn.classList.add('btn', 'btn-danger', 'delete-btn');
            deleteBtn.textContent = 'Delete';
            deleteBtn.addEventListener('click', function() {
                // Remove the row from the table
                row.remove();
            });

            // Append the delete button to a new cell in the row
            const actionCell = document.createElement('td');
            actionCell.style.border = '1px solid #D3D3D3'; // Add this line to style the cell
            actionCell.style.padding = '10px'; // Add padding of 0.5px
            actionCell.style.marginTop = '-20px'; // Move the top border up by 1px
            actionCell.appendChild(deleteBtn);
            row.appendChild(actionCell);
        } else {
            // Toggle the visibility of the delete button
            existingDeleteBtn.style.display = existingDeleteBtn.style.display === 'none' ? 'inline-block' : 'none';
            // Remove the action cell if the delete button is hidden
            if (existingDeleteBtn.style.display === 'none') {
                const actionCell = existingDeleteBtn.parentNode;
                actionCell.parentNode.removeChild(actionCell);
            }
        }
    });
});













document.getElementById('continueBtn').addEventListener('click', function() {
    window.location.href = 'index.html';
});





</script>
</body>
</html>
